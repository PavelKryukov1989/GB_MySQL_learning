ОБЩЕЕ ОПИСАНИЕ БАЗЫ ДАННЫХ «AVITO»

Назначение. 
Проектируемая реляционная база данных AVITO предназначена для хранения данных пользователей веб-сайта «avito.ru». Веб-сайт «avito.ru» предназначен для размещения объявлений с целью оказания услуг или покупки/продажи товаров.
Структура базы данных.
База данных AVITO состоит из 12 связанных между собой таблиц.

Таблица Users (таблица пользователей)
Предназначена для хранения первичных данных пользователей при регистрации: логина и пароля, а также дату и время создания строки, дату и время обновления строки. 
Первичный ключ: id INT
Таблица Profiles (таблица профилей пользователей)
Предназначена для хранения данных пользователей, указываемых в профиле: электронного адреса, телефона, статуса подтверждения личности (да/нет), текущего статуса в сети (в сети/не в сети), рейтинга (от 1 до 5), а также дату и время создания строки, дату и время обновления строки.   
Первичный ключ: user_id INT
Внешний ключ для связи с таблицей users 1:1 : profiles_user_id
Дополнительное ограничение на формат ввода телефона: сheck_phone

Таблица cities_users (таблица соответствия пользователя городу/области)
Предназначена для связи пользователей с городами (n:n). Содержит ссылку на пользователя из таблицы users и таблицы городов, а также дату и время создания строки, дату и время обновления строки.
Первичный cоставной ключ: (to_user_id, city_id)
Внешний ключ для связи с таблицей users: cities_users_to_user_id
Внешний ключ для связи с таблицей cities: cities_users_city_id

Таблица cities (таблица городов)
Представляет справочник городов и областей. Каждая строка содержит город, а также дату и время создания строки, дату и время обновления строки.
Первичный ключ: id INT

Таблица messages (таблица сообщений между пользователями)
Предназначена для хранения сообщений между пользователями. Каждая строка содержит ссылку на пользователя, выславшего сообщение (from_user_id), принявшего сообщение (to_user_id), текст сообщения, признак доставки, а также дату и время создания строки, дату и время обновления строки.
Первичный ключ: id INT
Внешний ключ для связи с таблицей users: messages_from_user_id
Внешний ключ для связи с таблицей users: messages_to_user_id

Таблица Wallet (таблица cчетов пользователей)
Предназначена для хранения данных кошельков пользователей. Каждая строка содержит кол-во денег в рублях, а также дату и время создания строки, дату и время обновления строки.  
Первичный ключ: id INT
Внешний ключ для связи с таблицей users 1:1 : wallet_to_user_id

Таблица announcement (таблица объявлений пользователей)
Предназначена для хранения объявлений пользователей. Каждая строка содержит категорию объявления, текущий статус размещения (черновик/размещен/кончился срок размещения), название объявления, описание объявления, дату размещения,  ссылку на автора, локацию оказания услуги, цену услуги, а также дату и время создания строки, дату и время обновления строки.
Первичный ключ: id INT
Внешний ключ для связи с таблицей users: announcement_ann_owner_id
Внешний ключ для связи с таблицей categories: announcement_category_id

Таблица categories (таблица категорий объявлений)
Представляет справочник категорий объявлений. Каждая строка содержит название категории, а также дату и время создания строки, дату и время обновления строки.
Первичный ключ: id INT

Таблица feedback (таблица просмотров/добавления в избранное объявлений)
Предназначена для хранения информации о каждом просмотре объявления и добавления в избранное. Каждая строка содержит ссылку на объявление,  ссылку на пользователя (просмотревшего объявление/добавившего в избранное), тип активности (просмотр/добавление в избранное), а также дату и время создания строки, дату и время обновления строки.
Первичный ключ: id INT
Внешний ключ для связи с таблицей announcement: feedback_ann_id
Внешний ключ для связи с таблицей users: feedback_user_id
Внешний ключ для связи с таблицей feedback_types: feedback_activity_type_id

Таблица feedback_types (таблица типов активности пользователя)
Представляет справочник типов активности пользователя. Каждая строка содержит название активности (просмотр/добавление в избранное), а также дату и время создания строки, дату и время обновления строки.
Первичный ключ: id INT
Таблица ann_comment (таблица отзывов пользователей к объявлениям)
Предназначена для хранения отзывов пользователей. Каждая строка содержит ссылку на объявление, ссылку на автора отзыва, текст отзыва, оценку за предоставленную услугу,  статус оказания услуги (сделка состоялась/cделка не состоялась), а также дату и время создания строки, дату и время обновления строки.
Первичный ключ: id INT
Внешний ключ для связи с таблицей announcement: ann_comment_ann_id
Внешний ключ для связи с таблицей users: ann_comment_user_id

Таблица media_files (таблица медиафайлов пользователей)
Предназначена для хранения ссылок на фото и видео, которые прикладывают пользователи к своему профилю или объявлению. Каждая строка содержит ссылку на объект, к которому прикрепляется фото/видео (id пользователя или его объявления), полный путь к медиафайлу, метаданные файла (в JSON формате); категорию объекта, к которому прикрепляется медиафайл (1 - фото к профилю, 2 - фото к объявлению, 3 - видео к объявлению), а также дату и время создания строки, дату и время обновления строки.
Первичный ключ: id INT
Связь таблицы media_files с таблицей users, announcement не осуществляется через внешние ключи. Она определяется выбором категории объекта и ссылкой на объект в каждой строке таблицы media_files.
